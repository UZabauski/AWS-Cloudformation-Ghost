AWSTemplateFormatVersion: 2010-09-09
Description: |
  CloudWatch Dashboard for infrastructure aggregation
Resources:
  DashboardSideBySide:
    Type: AWS::CloudWatch::Dashboard
    Properties:
      DashboardName: CloudX
      # Some values for metrics (e.g.: EFS id, RDS id) need to be changed to the correct
      DashboardBody: '{"widgets":[{"type":"metric","x":0,"y":0,"width":6,"height":6,"properties":{"metrics":[["AWS/EC2", "CPUUtilization", "AutoScalingGroupName", "ghost_ec2_pool"]],"stacked":false,"period":300,"view":"timeSeries","region":"us-east-1","title":"EC2 Instance CPU"}},{"type":"metric","x":0,"y":7,"width":6,"height":6,"properties":{"metrics":[[ "AWS/ECS", "CPUUtilization", "ServiceName", "cloudxservice", "ClusterName", "ghost" ]],"stacked":false,"period":300,"view":"timeSeries","region":"us-east-1","title":"ECS Instance CPU"}},{"type":"metric","x":7,"y":0,"width":6,"height":6,"properties":{"metrics":[[ "AWS/Usage", "CallCount", "Type", "API", "Resource", "ListTasks", "Service", "ECS", "Class", "None" ],[ "...", "RunTask", ".", ".", ".", "." ]],"stacked":false,"period":300,"view":"timeSeries","region":"us-east-1","title":"ECS Running tasks count"}},{"type":"metric","x":7,"y":7,"width":6,"height":6,"properties":{"metrics":[[ "AWS/EFS", "ClientConnections", "FileSystemId", "fs-01b5539ccc310f922" ]],"stacked":false,"period":300,"stat": "Average","view":"timeSeries","region":"us-east-1","title":"EFS ClientConnections"}},{"type":"metric","x":14,"y":0,"width":6,"height":6,"properties":{"metrics":[[ "AWS/EFS", "StorageBytes", "StorageClass", "Standard", "FileSystemId", "fs-01b5539ccc310f922" ]],"stacked":false,"period":300,"view":"timeSeries","region":"us-east-1","title":"EFS StorageBytes"}},{"type":"metric","x":14,"y":7,"width":6,"height":6,"properties":{"metrics":[[ "AWS/RDS", "DatabaseConnections", "DBInstanceIdentifier", "cd1q1nh51z7fmf6" ]],"stacked":false,"stat":"Average","period":300,"view":"timeSeries","region":"us-east-1","title":"RDS DB connections"}},{"type":"metric","x":0,"y":14,"width":6,"height":6,"properties":{"metrics":[[ "AWS/RDS", "CPUUtilization", "DBInstanceIdentifier", "cd1q1nh51z7fmf6" ]],"stacked":false,"period":300,"view":"timeSeries","region":"us-east-1","title":"RDS CPU utilization"}},{"type":"metric","x":7,"y":14,"width":6,"height":6,"properties":{"metrics":[[ "AWS/RDS", "ReadIOPS", "DBInstanceIdentifier", "cd1q1nh51z7fmf6" ],[ ".", "WriteIOPS", ".", "." ]],"stacked":false,"period":300,"view":"timeSeries","region":"us-east-1","title":"RDS storage read and write IOPS"}}]}'
